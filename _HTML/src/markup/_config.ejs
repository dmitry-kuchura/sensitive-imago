<%

	// файлы
	// ========
		// список основных файлов
		locals._viewsFiles = {
			index: {
				title: 'Главная',
				hasSeoText: false,
				seoTextContent: '../widgets/seo-text'
			},
			gallery_photo: {
				title: 'Галерея | Фото',
				hasSeoText: false,
				parent:'index'
			},
			gallery_video: {
				title: 'Галерея | Фото',
				hasSeoText: false,
				parent:'index'
			},
			sitemap: {
				title: 'Карта сайта',
				parent: 'index',
				hasSeoText: false
			}
		};

		for (let file in _viewsFiles) {
			_viewsFiles[file].alias = file;
			_viewsFiles[file].file = `${file}.html`;
		}

		// текущий файл
		locals._activeFileData = _viewsFiles[_activeFile];




	// версии файлов
	// =============
		locals._fileVersions = {
			favicons: {
				append: true,
				generate: true,
				default: '?v=zXdXyg2vAg'
			},
			svgsprite: '?v=zXdXyg2vAg'
		};

		locals.Build= {
			menu: function (arr) {
				var html = [];
				var end = '</li>';
				for (i in arr) {
					var item = arr[i];
					var li = `<li ${item.active ? "class='is-active'" : ""}><a href="${item.url}.html">${item.text}</a>`;
					if (item.hasOwnProperty('submenu')) {
						li += `<ul>${BuildMenu(item.submenu)}</ul>`
					}
					li += end;
					html.push(li);
				}
				return html.join('\n');
			},
			breadcrumbs:function(){
				var html = [];
				html.push('</div>');
				html.push(`<span typeof="v:Breadcrumb">${_activeFileData.title}</span>`);
				var page = _activeFileData.parent;
				while (page) {
					var cur = _viewsFiles[page];
					html.push(`<span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="${page}.html">${cur.title}</a></span>`);
					page = cur.parent;
				}
				html.push(`<div class="breadcrumbs" xmlns:v="http://rdf.data-vocabulary.org/#">`);
				html = html.reverse();
				return html.join('\n');
			},
			pagination:function(count,arrows){
				var html = [];
				html.push('<div class="pagination">');
				if (arrows) html.push('<a class="pagination__link pagination__link--prev" href="#">&lt;</a>');
				html.push('<span class="pagination__link is-active">1</span>');
				for (var i=2;i<=count;i++){
					html.push(`<a class="pagination__link" href="#">${i}</a>`);
				}
				if (arrows) html.push('<a class="pagination__link pagination__link--next" href="#">&gt;</a>');
				html.push('</div>');
				return html.join('\n');
			}
		}
%>


<% include helpers/versions %>
<% include helpers/attrs %>

